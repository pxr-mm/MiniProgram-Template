{"version":3,"sources":["webpack:///D:/学习/learn_demos/mini-program-template/components/login-pop.vue?db0a","webpack:///D:/学习/learn_demos/mini-program-template/components/login-pop.vue?cb70","webpack:///D:/学习/learn_demos/mini-program-template/components/login-pop.vue?eaf1","webpack:///D:/学习/learn_demos/mini-program-template/components/login-pop.vue?184c","uni-app:///components/login-pop.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AAC4K;AAC5K,gBAAgB,sLAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,oOAEN;AACL,GAAG;AACH;AACA,WAAW,oOAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AAAA;AAAmpB,CAAgB,gqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwDvqB;;;;AAIA;;;;;;;;;;AAUA,gE;;;AAGA;AACA;AACA;AACA,mBADA;AAEA,oBAFA,EADA,EADA;;;AAOA,MAPA,kBAOA;AACA;AACA,qBADA;;AAGA,GAXA;AAYA,QAZA,oBAYA;;AAEA,GAdA;AAeA,QAfA,oBAeA;AACA;AACA,GAjBA;AAkBA;;AAEA,sDAFA;AAGA;AACA;AACA,gBALA,wBAKA,CALA,EAKA;AACA;AACA,mBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kDADA;AAEA,+CAFA;;AAIA;AACA;AACA;;AAEA;AACA,UADA,CACA;AACA;AACA;AACA,gBADA;AAEA,sCAFA;AAGA,oBAHA;;AAKA;AACA,sCADA;AAEA,gBAFA;;AAIA;AACA;AACA,OAdA;AAeA,KA1CA;;;;AA8CA,iBA9CA,2BA8CA;AACA;AACA;;AAEA,KAlDA;AAmDA;AACA,eApDA,yBAoDA;AACA;AACA;AACA;AACA,KAxDA;AAyDA,WAzDA,mBAyDA,MAzDA,EAyDA;AACA,2CADA,SACA,GADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA,gCAFA;;AAIA,iBAVA,MAUA;AACA;AACA,uCADA;AAEA,gCAFA;;AAIA,iBAlBA;;AAoBA,KA7EA,GAlBA;;AAiGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA,GAjGA,E","file":"components/login-pop.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./login-pop.vue?vue&type=template&id=53f820c2&\"\nvar renderjs\nimport script from \"./login-pop.vue?vue&type=script&lang=js&\"\nexport * from \"./login-pop.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/login-pop.vue\"\nexport default component.exports","export * from \"-!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login-pop.vue?vue&type=template&id=53f820c2&\"","var components = {\n  uPopup: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-popup/u-popup\" */ \"uview-ui/components/u-popup/u-popup.vue\"\n    )\n  },\n  uImage: function() {\n    return import(\n      /* webpackChunkName: \"node-modules/uview-ui/components/u-image/u-image\" */ \"uview-ui/components/u-image/u-image.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login-pop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../tools/HB/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login-pop.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"login-pop\" v-if=\"showAuth\">\r\n\t\t<!-- <u-popup v-model=\"showAuth\" mode=\"center\" border-radius=\"14\" closeable='true' width=\"400\" height=\"400\" @close=\"closeLoginPop\">\r\n\t\t\t<view style=\"height: 400rpx; display: flex;flex-direction: column;justify-content: center;align-items: center;\">\r\n\t\t\t\t<u-button open-type=\"getUserInfo\" @getuserinfo=\"authUserInfo\">用户授权</u-button>\r\n\t\t\t\t<u-button open-type=\"getPhoneNumber\" @getphonenumber=\"authPhoneNumber\">手机授权</u-button>\r\n\t\t\t</view>\r\n\t\t</u-popup> -->\r\n\r\n\r\n\t\t<u-popup v-model=\"showAuth\" mode=\"bottom\" border-radius=\"36\" :mask-close-able='false' closeable='true' @close=\"closeLoginPop\">\r\n\t\t\t<view style=\"padding: 48rpx;  color: #000000;display: flex;flex-direction: column;align-items: center;\">\r\n\t\t\t\t<view class=\"\" style=\"display: flex;flex-direction: column;align-items: center;\">\r\n\t\t\t\t\t<u-image src=\"@/static/avatar.png\" width=\"88rpx\" height=\"88rpx\" border-radius=\"50%\"></u-image>\r\n\t\t\t\t\t<view class=\"\" style=\"font-weight: 800;font-size: 48rpx;margin-top: 16rpx;\">侠客实验室</view>\r\n\t\t\t\t\t<view class=\"\" style=\"margin-top: 12rpx;color: #969799;\">孵化基地</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"\" style=\"margin-top: 48rpx;width: 100%;\">\r\n\t\t\t\t\t<view class=\"\" style=\"display: flex;flex-direction: row;justify-content: space-around;width: 100%;\">\r\n\t\t\t\t\t\t<view class=\"\" style=\"display: flex;flex-direction: column;align-items: center;\">\r\n\t\t\t\t\t\t\t<u-image src=\"@/static/avatar.png\" width=\"48rpx\" height=\"48rpx\"></u-image>\r\n\t\t\t\t\t\t\t<view class=\"\" style=\"font-weight: 800;margin-top: 12rpx;\">孵化室</view>\r\n\t\t\t\t\t\t\t<view class=\"\" style=\"font-size: 22rpx;text-align: center;margin-top: 12rpx;color: #969799;width: 150rpx;\">发起项目，参与项目讨论</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"\" style=\"display: flex;flex-direction: column;align-items: center;\">\r\n\t\t\t\t\t\t\t<u-image src=\"@/static/avatar.png\" width=\"48rpx\" height=\"48rpx\"></u-image>\r\n\t\t\t\t\t\t\t<view class=\"\" style=\"font-weight: 800;margin-top: 12rpx;\">精选</view>\r\n\t\t\t\t\t\t\t<view class=\"\" style=\"font-size: 22rpx;text-align: center;margin-top: 12rpx;color: #969799;width: 150rpx;\">精选文章等你来看</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"\" style=\"display: flex;flex-direction: column;align-items: center;\">\r\n\t\t\t\t\t\t\t<u-image src=\"@/static/avatar.png\" width=\"48rpx\" height=\"48rpx\"></u-image>\r\n\t\t\t\t\t\t\t<view class=\"\" style=\"font-weight: 800;margin-top: 12rpx;\">关注实验室</view>\r\n\t\t\t\t\t\t\t<view class=\"\" style=\"font-size: 22rpx;text-align: center;margin-top: 12rpx;color: #969799;width: 150rpx;\">更多精彩内容</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"\" style=\"width: 100%;margin-top: 100rpx;\">\r\n\t\t\t\t\t<view class=\"\" style=\"display: flex;flex-direction: row;justify-content: space-around\">\r\n\t\t\t\t\t\t<view style=\"\r\n\t\t\t\t\t\tborder-radius: 48rpx;width: 300rpx; font-size: 32rpx;\r\n\t\t\t\t\t\tcolor: #999999;border-radius: 48rpx;text-align: center;line-height: 92rpx; border: 1px solid #999999;box-sizing: border-box;\"\r\n\t\t\t\t\t\t @click=\"cancelLogin\">暂不登录</view>\r\n\t\t\t\t\t\t<button style=\"\r\n\t\t\t\t\t\tborder-radius: 48rpx;\r\n\t\t\t\t\t\tcolor: #ffffff;width: 300rpx;background-color: #2EA5FF;\"\r\n\t\t\t\t\t\t open-type=\"getUserInfo\" @getuserinfo=\"authUserInfo\">立即登录</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</u-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// 微信登录校验code\r\n\timport {\r\n\t\tGetCodeStatus\r\n\t} from '@/common/wx.js'\r\n\t// vuex的mapMutations \r\n\timport {\r\n\t\tmapMutations,\r\n\t\tmapActions\r\n\t} from 'vuex'\r\n\r\n\t// import {\r\n\t// \tgetUserInfo,\r\n\t// \tgetStatisticsInfo\r\n\t// } from '../../api/mine.js'\r\n\r\n\timport {\r\n\t\tLogin\r\n\t} from \"@/http/api/login.js\"\r\n\texport default {\r\n\t\tprops: {\r\n\t\t\tisShowLogin: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false,\r\n\t\t\t},\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowAuth: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.showAuth = this.isShowLogin\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 调用vuex中的setToken，setUserInfo方法，相当于调用vuex的commit方法\r\n\t\t\t...mapMutations(['setToken', 'setUserInfo']),\r\n\t\t\t// ...mapActions(['_getUserInfo', 'getStatisticsInfoFn']),\r\n\t\t\t// 微信授权登录\r\n\t\t\tauthUserInfo(e) {\r\n\t\t\t\twx.clearStorageSync({\r\n\t\t\t\t\tkey:'code'\r\n\t\t\t\t})\r\n\t\t\t\tlet that = this\r\n\t\t\t\tif (!e.detail.rawData) {\r\n\t\t\t\t\tconsole.log(\"未授权用户信息\")\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet result = e.detail\r\n\t\t\t\tlet encryptedData = result.encryptedData\r\n\t\t\t\tlet iv = result.iv\r\n\r\n\t\t\t\t// 存到vuex中(this.$store.commit)\r\n\t\t\t\tlet userInfo = {\r\n\t\t\t\t\tuser_headimgurl: result.userInfo.avatarUrl,\r\n\t\t\t\t\tuser_nickname: result.userInfo.nickName\r\n\t\t\t\t}\r\n\t\t\t\tthis.setUserInfo(userInfo)\r\n\t\t\t\t//本地存用户头像等信息\r\n\t\t\t\tuni.setStorageSync(\"userInfo\", userInfo)\r\n\t\t\t\t\r\n\t\t\t\tGetCodeStatus()\r\n\t\t\t\t\t.then((code) => {\r\n\t\t\t\t\t\tconsole.log('code', code)\r\n\t\t\t\t\t\tlet params = {\r\n\t\t\t\t\t\t\tiv: iv,\r\n\t\t\t\t\t\t\tencryptedData: encryptedData,\r\n\t\t\t\t\t\t\tcode: code,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.setStorageSync(\"login_params\", {\r\n\t\t\t\t\t\t\tencryptedData,\r\n\t\t\t\t\t\t\tiv\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tuni.setStorageSync(\"code\", code)\r\n\t\t\t\t\t\tthis.loginFn(params)\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\r\n\r\n\r\n\t\t\tcloseLoginPop() {\r\n\t\t\t\t// uni.clearStorageSync()\r\n\t\t\t\tthis.$emit(\"closeLogin\", this.isShowLogin)\r\n\r\n\t\t\t},\r\n\t\t\t// 暂不登录\r\n\t\t\tcancelLogin() {\r\n\t\t\t\tthis.showAuth = false\r\n\t\t\t\t// uni.clearStorageSync()\r\n\t\t\t\tthis.$emit(\"closeLogin\", this.isShowLogin)\r\n\t\t\t},\r\n\t\t\tasync loginFn(params) {\r\n\t\t\t\tlet res = await Login(params)\r\n\t\t\t\tconsole.log(res, \"登录res\")\r\n\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\tthis.setToken(res.token)\r\n\t\t\t\t\tuni.setStorageSync(\"token\", res.token)\r\n\t\t\t\t\tuni.setStorageSync()\r\n\t\t\t\t\tthis.$emit(\"loginMsg\", res.token)\r\n\t\t\t\t\tthis.showAuth = false\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"登录成功\",\r\n\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: \"登录失败，请稍后再试\",\r\n\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tisShowLogin: function(value, old) {\r\n\t\t\t\t// console.log(value,old,\"弹框\")\r\n\t\t\t\tthis.showAuth = value\r\n\t\t\t},\r\n\t\t\t// '$store.state.relogin':function(value,old){\r\n\t\t\t// \t// this.showAuth = value\r\n\t\t\t// }\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\n"],"sourceRoot":""}